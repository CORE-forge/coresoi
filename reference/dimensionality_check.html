<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="dimensionality_check performs a dimensionality assessment of a set of elementary indicators
using either the Item Response Theory (IRT) framework or the Factor Analysis (FA)."><title>Dimensionality Check — dimensionality_check • coresoi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Dosis-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Lora-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dimensionality Check — dimensionality_check"><meta property="og:description" content="dimensionality_check performs a dimensionality assessment of a set of elementary indicators
using either the Item Response Theory (IRT) framework or the Factor Analysis (FA)."><meta property="og:image" content="https://core-forge.github.io/coresoi/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script async defer src="https://hypothes.is/embed.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">coresoi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/coresoi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/summary.html">summary</a>
    <a class="dropdown-item" href="../articles/ChoiceOfElementaryIndicators.html">Choice of elementary indicators</a>
    <a class="dropdown-item" href="../articles/DataSelectionArchitecture.html">Data selection and architecture</a>
    <a class="dropdown-item" href="../articles/CompositeIndicator.html">Composite Indicator (CI)</a>
    <a class="dropdown-item" href="../articles/tryCoresoiWithYourData.html">Try `coresoi` with you own data</a>
    <a class="dropdown-item" href="../articles/useCoresoiAPI.html">Use CORE API in R</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CORE-forge/coresoi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Dimensionality Check</h1>
      <small class="dont-index">Source: <a href="https://github.com/CORE-forge/coresoi/blob/HEAD/R/dimensionality.R" class="external-link"><code>R/dimensionality.R</code></a></small>
      <div class="d-none name"><code>dimensionality_check.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>dimensionality_check</code> performs a dimensionality assessment of a set of elementary indicators
using either the Item Response Theory (IRT) framework or the Factor Analysis (FA).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dimensionality_check</span><span class="op">(</span></span>
<span>  <span class="va">indicator_list</span>,</span>
<span>  dim_method <span class="op">=</span> <span class="st">"IRT"</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  missing <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  max_ndim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">indicator_list</span><span class="op">)</span>,</span>
<span>  nrep <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  arg_tech_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>indicator_list</dt>
<dd><p>list of outputs about each indicator computable for the target unit
(e.g., company or contracting authority), as returned by, for example, <code><a href="ind_1.html">ind_1()</a></code>, <code><a href="ind_2.html">ind_2()</a></code>, etc.</p></dd>


<dt>dim_method</dt>
<dd><p>method for the dimensionality assessment, to be chosen between <code>"IRT"</code> and <code>"FA"</code>.
If the former is selected, the dimensionality of elementary indicators is evaluated in the IRT framework
using <code><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt::mirt()</a></code> function. On the other hand, exploratory factor analysis is used by means of function
<code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">psych::fa()</a></code>. See Details.</p></dd>


<dt>cutoff</dt>
<dd><p>threshold for dichotomising the indicators (see <code><a href="normalise.html">normalise()</a></code>).</p></dd>


<dt>missing</dt>
<dd><p>method for imputing missing values (see <code><a href="manage_missing.html">manage_missing()</a></code>):</p><ul><li><p><code>missing = 0</code>: missing values are replaced with '0' (not at risk);</p></li>
<li><p><code>missing = 1</code>: missing values are imputed using logistic regression.</p></li>
</ul></dd>


<dt>max_ndim</dt>
<dd><p>maximum number of dimensions to check in the IRT framework (not greater than the number
of elementary indicators).</p></dd>


<dt>nrep</dt>
<dd><p>number of replicates for random initialisation of the algorithm for fitting IRT models.</p></dd>


<dt>seed</dt>
<dd><p>seed number used during estimation. Default is 12345</p></dd>


<dt>arg_tech_list</dt>
<dd><p>a list containing lower level technical parameters for estimation. May be:</p><ul><li><p><strong>NCYCLES</strong> maximum number of EM or MH-RM cycles; defaults are 500 and
2000</p></li>
<li><p><strong>MAXQUAD</strong> maximum number of quadratures, which you can increase if you
have more than 4GB or RAM on your PC; default 20000</p></li>
<li><p><strong>theta_lim</strong> range of integration grid for each dimension; default is <code>c(-6, 6)</code>.</p></li>
</ul><p>Note that when <code>itemtype = 'ULL'</code> a log-normal distribution is used and the
range is change to <code>c(.01, and 6^2)</code>, where the second term is the square
of the theta_lim input instead</p></dd>


<dt>...</dt>
<dd><p>optional arguments for <code><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt::mirt()</a></code> (e.g., estimation algorithm, convergence threshold,
etc.) or <code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">psych::fa()</a></code> (e.g., method for factor extraction, rotation method, etc.).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>different objects according to <code>dim_method</code>:</p><ul><li><p><code>dim_method = "IRT"</code>: a list of IRT models (as returned by <code><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt::mirt()</a></code>) for each possible dimensional
solution, from one to <code>max_ndim</code> dimensions;</p></li>
<li><p><code>dim_method = "FA"</code>: best factorial solution (as returned by <code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">psych::fa()</a></code>).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function for dimensionality evaluation about a set of the elementary indicators is implemented
as follows. Firstly, it deals with <strong>dichotomised</strong> indicators (as those proposed in CO.R.E.),
<strong>without missing values</strong>. Consequently, before carrying out the dimensionality assessment, the user has to provide
the list of indicators (see argument <code>indicator_list</code>) together with two further arguments for their dichotomisation
(<code>cutoff</code>) and missing management (<code>missing</code>).</p>
<p>Then, the dimensionality check is performed according to the chosen method (<code>dim_method</code>).</p>
<p>If <code>dim_method = "IRT"</code>, the IRT framework is considered (by means of <code><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt::mirt()</a></code> function). In this case,
as first step, the function evaluates the model fitting of the <em>Rasch model</em> against the <em>2PL model</em>
(two-parameter logistic), two of the most widely used IRT models for binary data. It is evaluated under the
unidimensional setting, in order to understand which type of model has a better fit on the data at hand
(using common penalised likelihood metrics, such as AIC, SABIC, BIC, etc.).</p>
<p>As second step, multidimensional models are estimated by incrementing the number of dimensions each time, from two
onwards (until <code>max_ndim</code>). For a given number of dimensions, say \(d\), several estimates of the IRT model
(i.e., Rasch or 2PL, according to step 1) are obtained on the data at hand according the different initialisations
of the estimation algorithm:</p><ul><li><p>a first initialisation is <em>deterministic</em>, based on observed data;</p></li>
<li><p>the others (according to <code>nrep</code>) are <em>random</em>, in order to completely explore the likelihood function to maximise.</p></li>
</ul><p>Finally 1 + <code>nrep</code> estimates of the IRT model with \(d\) dimensions are obtained and that with the largest
value of maximised likelihood is saved in the list to be returned.</p>
<p>Step 2 is repeated starting from \(d = 2\) until \(d =\) <code>max_ndim</code>. As the function ends, a list of <code>max_ndim</code>
IRT models is returned, one for each potential number of dimensions. Moreover, a summary of the dimensionality check
is displayed, showing, for each \(d\), the model fitting metrics of the best model with \(d\) dimensions.
This summary helps in selecting the most suitable dimensional solution.</p>
<p>If <code>dim_method = "FA"</code>, exploratory factor analysis is considered (using <code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">psych::fa()</a></code> function). In particular,
in order to find the suitable number of factors to extract, this function computes the eigenvalues of the
correlation matrix among the elementary indicators (computed using the tetrachoric correlation, given the binary
nature of our indicators). Then, given the "eigenvalues &gt; 1" rule, the suitable number of factors is retained and
used in calling <code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">psych::fa()</a></code>. The plot of the eigenvalues against the number of factors is also displayed.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt</a></code>
<code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">fa</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># sample of 200k contracts</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mock_data_core</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2e5</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mock_sample0</span> <span class="op">&lt;-</span> <span class="va">mock_data_core</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># indicators for companies</span></span></span>
<span class="r-in"><span>  <span class="va">mock_sample</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">mock_sample0</span>, <span class="va">aggiudicatari</span>, keep_empty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mock_sample_variants</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">mock_sample</span>, <span class="va">varianti</span>, keep_empty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">out_companies</span> <span class="op">&lt;-</span> <span class="fu"><a href="ind_all.html">ind_all</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">mock_sample</span>,</span></span>
<span class="r-in"><span>    data_ind8 <span class="op">=</span> <span class="va">mock_sample_variants</span>,</span></span>
<span class="r-in"><span>    emergency_name <span class="op">=</span> <span class="st">"coronavirus"</span>,</span></span>
<span class="r-in"><span>    target_unit <span class="op">=</span> <span class="st">"companies"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">out_dim</span> <span class="op">&lt;-</span> <span class="fu">dimensionality_check</span><span class="op">(</span></span></span>
<span class="r-in"><span>    indicator_list <span class="op">=</span> <span class="va">out_companies</span>,</span></span>
<span class="r-in"><span>    dim_method <span class="op">=</span> <span class="st">"IRT"</span>,</span></span>
<span class="r-in"><span>    max_ndim <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    cutoff <span class="op">=</span> <span class="fl">0.95</span>,</span></span>
<span class="r-in"><span>    missing <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>    nrep <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>    TOL <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>    verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    method <span class="op">=</span> <span class="st">"QMCEM"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Niccolo Salvini, Simone DelSarto, Michela Gnaldi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

