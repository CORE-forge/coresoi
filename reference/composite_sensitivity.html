<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="composite_sensitivity performs a complete sensitivity analysis of the composite
indicator, by computing it using all the possible combinations of methodological choices --
about normalisation, management of missing values, weighting and aggregation -- as well as evaluating
the contribution of each elementary indicator to the final composite, by removing each indicator
at a time from the computation.
Note: the unique normalisation method considered within the CO.R.E. project is the 'dichotomisation'.
Then, the sensitivity is based on the choice of the threshold. See Details."><title>Perform a complete sensitivity analysis of the composite indicator — composite_sensitivity • coresoi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Dosis-0.4.6/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.6/font.css" rel="stylesheet"><link href="../deps/Lora-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Perform a complete sensitivity analysis of the composite indicator — composite_sensitivity"><meta property="og:description" content="composite_sensitivity performs a complete sensitivity analysis of the composite
indicator, by computing it using all the possible combinations of methodological choices --
about normalisation, management of missing values, weighting and aggregation -- as well as evaluating
the contribution of each elementary indicator to the final composite, by removing each indicator
at a time from the computation.
Note: the unique normalisation method considered within the CO.R.E. project is the 'dichotomisation'.
Then, the sensitivity is based on the choice of the threshold. See Details."><meta property="og:image" content="https://core-forge.github.io/coresoi/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script async defer src="https://hypothes.is/embed.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">coresoi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/coresoi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/summary.html">summary</a>
    <a class="dropdown-item" href="../articles/ChoiceOfElementaryIndicators.html">Choice of elementary indicators</a>
    <a class="dropdown-item" href="../articles/DataSelectionArchitecture.html">Data selection and architecture</a>
    <a class="dropdown-item" href="../articles/CompositeIndicator.html">Composite Indicator (CI)</a>
    <a class="dropdown-item" href="../articles/tryCoresoiWithYourData.html">Try `coresoi` with you own data</a>
    <a class="dropdown-item" href="../articles/useCoresoiAPI.html">Use CORE API in R</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CORE-forge/coresoi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Perform a complete sensitivity analysis of the composite indicator</h1>
      <small class="dont-index">Source: <a href="https://github.com/CORE-forge/coresoi/blob/HEAD/R/composite.R" class="external-link"><code>R/composite.R</code></a></small>
      <div class="d-none name"><code>composite_sensitivity.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>composite_sensitivity</code> performs a complete sensitivity analysis of the composite
indicator, by computing it using all the possible combinations of methodological choices --
about <strong>normalisation</strong>, <strong>management of missing values</strong>, <strong>weighting</strong> and <strong>aggregation</strong> -- as well as evaluating
the contribution of each elementary indicator to the final composite, by removing each indicator
at a time from the computation.
<em>Note: the unique normalisation method considered within the CO.R.E. project is the 'dichotomisation'.</em>
<em>Then, the sensitivity is based on the choice of the threshold. See Details.</em></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">composite_sensitivity</span><span class="op">(</span><span class="va">indicator_list</span>, cutoff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>, <span class="fl">0.995</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>indicator_list</dt>
<dd><p>list of outputs about each indicator computable for the target unit
(e.g., company or contracting authority), as returned by <code><a href="ind_all.html">ind_all()</a></code>.</p></dd>


<dt>cutoff</dt>
<dd><p>vector of thresholds for normalising the indicators (i.e., for their dichotomisation)</p></dd>


<dt>...</dt>
<dd><p>optional arguments of <code><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt::mirt()</a></code> function (for getting IRT weights).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a list with two versions (wide and long) of a dataframe (<code>sens_wide</code> and <code>sens_long</code>),
which includes, for each target unit, all the possible values of the composite indicator obtained
by combining methodological choices and indicator removals. See Details.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This is the main function for carrying out the sensitivity analysis of the composite
indicator. It requires a list of indicator outputs as returned by <code><a href="ind_all.html">ind_all()</a></code>. This list is given to the internal function
<code><a href="create_indicator_matrix.html">create_indicator_matrix()</a></code> for obtaining the data matrix of elementary indicators.</p>
<p>Thereafter, several steps for the sensitivity analysis are performed, as follows.</p><ol><li><p>Elementary indicators are <em>normalised</em> through the 'dichotomisation' method, using several
thresholds provided through argument <code>cutoff</code>.</p></li>
<li><p><em>Missing values</em> in the elementary indicators (if any) are managed with both the proposed methods,
that is, by replacing missing values with '0' ('not at risk'), or by means of logistic regression
models (see internal function <code><a href="manage_missing.html">manage_missing()</a></code>).</p></li>
<li><p>Vectors of <em>weights</em> are obtained according to all the three proposed ways, that is, equal weights,
expert weights and IRT weights (see <code><a href="get_weights.html">get_weights()</a></code>). The last method can require much time, as it
depends on the data at hand, which are different every time according to step 1 and 2.</p></li>
<li><p><em>Composite indicator computation</em>. For each target unit, the composite indicator is computed
on the basis of each combination of the above methodological choices (steps 1-3),
hence \(k \times 2 \times 3\) combinations, where \(k\) is the number of normalisation thresholds
(<code>cutoff</code>). In addition, the composite indicator is computed by removing each elementary indicator
at a time from the computation. Finally, given \(Q\) elementary indicators, the composite indicator is
computed, for each target unit, \(k \times 2 \times 3 \times (Q+1)\) times.</p></li>
</ol><p>Results are returned in two dataframes. In the <strong>wide</strong> version (<code>sens_wide</code>), we have the target unit
in the rows and as many columns as the number of the above combinations, which report
the computed composite. Specifically, the first column is the target unit ID, whereas the subsequent
columns contain the composite computed according to the different combinations (steps 1-4 above).
The names of these columns have the following structure: c<strong>x</strong>.m<strong>y</strong>.w_<strong>abc</strong>.<strong>rrr</strong>, where</p><ul><li><p><strong>x</strong> is the cut-off value for normalising the elementary indicators (e.g., 0.95);</p></li>
<li><p><strong>y</strong> is the label for missing management method (0 or 1, see [<code><a href="manage_missing.html">manage_missing()</a></code>);</p></li>
<li><p><strong>abc</strong> is the weighting scheme ('eq' for equal weights; 'exp' for expert weights;
'irt' for IRT weights);</p></li>
<li><p><strong>rrr</strong> is the indication of the removed indicator ('all' means that no indicator is removed).</p></li>
</ul><p>For example, column labelled as <code>c0.95.m0.w_eq.all</code> contains the composite indicators computed using:
<strong>0.95</strong> as cut-off value for the normalisation; method <em>'0'</em> for missing management;
equal weights (<strong>w_eq</strong>); without removal of elementary indicators (<strong>all</strong>).</p>
<p>The function directly returns also the <strong>long</strong> version of the above dataframe (<code>sens_long</code>), where
the target unit is repeated for each 'sensitivity combination'. Here, the columns refer to the variables
that enter in the sensitivity analysis. In particular, we have:</p><ul><li><p><code>aggregation_name</code>: target unit ID</p></li>
<li><p><code>ci</code>: value of the composite</p></li>
<li><p><code>cutoff</code>: possible cut-off values for the normalisation</p></li>
<li><p><code>miss</code>: '0' or '1'</p></li>
<li><p><code>weights</code>: 'eq', 'exp' or 'irt'</p></li>
<li><p><code>ind_removed</code>: 'none', '-ind1', '-ind2', ...,</p></li>
</ul><p>The long version can be useful for further specific analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">mock_data_core_variants</span> <span class="op">&lt;-</span> <span class="fu">unnest</span><span class="op">(</span><span class="va">mock_data_core</span>, <span class="va">varianti</span>, keep_empty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">out_companies</span> <span class="op">&lt;-</span> <span class="fu"><a href="ind_all.html">ind_all</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mock_data_core</span>,</span></span>
<span class="r-in"><span>                           data_ind8 <span class="op">=</span> <span class="va">mock_data_core_variants</span>,</span></span>
<span class="r-in"><span>                           emergency_name <span class="op">=</span> <span class="st">"coronavirus"</span>,</span></span>
<span class="r-in"><span>                           target_unit <span class="op">=</span> <span class="st">"companies"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">out_sens</span> <span class="op">&lt;-</span> <span class="fu">composite_sensitivity</span><span class="op">(</span>indicator_list <span class="op">=</span> <span class="va">out_companies</span>,</span></span>
<span class="r-in"><span>                                    cutoff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.90</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                    TOL <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>  <span class="co"># argument for mirt::mirt function</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">out_sens</span><span class="op">$</span><span class="va">sens_wide</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">out_sens</span><span class="op">$</span><span class="va">sens_long</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># regression and ANOVA on sensitivity output</span></span></span>
<span class="r-in"><span>  <span class="va">datl</span> <span class="op">&lt;-</span> <span class="va">out_sens1</span><span class="op">$</span><span class="va">sens_long</span></span></span>
<span class="r-in"><span>  <span class="va">datl</span><span class="op">$</span><span class="va">ci100</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="op">*</span> <span class="va">datl</span><span class="op">$</span><span class="va">ci</span></span></span>
<span class="r-in"><span>  <span class="va">datl</span><span class="op">$</span><span class="va">ind_removed2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">datl</span><span class="op">$</span><span class="va">ind_removed</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/relevel.html" class="external-link">relevel</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix</a></span><span class="op">(</span><span class="va">ci100</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cutoff</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">miss</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">weights</span><span class="op">)</span> <span class="op">+</span> <span class="va">ind_removed2</span>, data <span class="op">=</span> <span class="va">datl</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="va">datl</span><span class="op">$</span><span class="va">ci100</span></span></span>
<span class="r-in"><span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">X</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">formula</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">formula</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"y~"</span>, <span class="va">formula</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">formula</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mod_anova</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mod_anova</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># graphical visualisation of the results</span></span></span>
<span class="r-in"><span>  <span class="co"># median/mean of CI for each target unit ID</span></span></span>
<span class="r-in"><span>  <span class="va">datw</span><span class="op">$</span><span class="va">medianCI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">datw</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">median</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">datw</span><span class="op">$</span><span class="va">meanCI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">datw</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">datw</span> <span class="op">&lt;-</span> <span class="va">datw</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">relocate</span><span class="op">(</span><span class="va">medianCI</span>, .after <span class="op">=</span> <span class="va">aggregation_name</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">relocate</span><span class="op">(</span><span class="va">meanCI</span>, .after <span class="op">=</span> <span class="va">medianCI</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">datw_no0</span> <span class="op">&lt;-</span> <span class="va">datw</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">meanCI</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># long data about the first 400 units</span></span></span>
<span class="r-in"><span>  <span class="va">datl_no0</span> <span class="op">&lt;-</span> <span class="va">datl</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">aggregation_name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">datw_no0</span><span class="op">$</span><span class="va">aggregation_name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">400</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">left_join</span><span class="op">(</span><span class="va">datw_no0</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="va">aggregation_name</span>, <span class="va">medianCI</span>, <span class="va">meanCI</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">arrange</span><span class="op">(</span><span class="va">meanCI</span>, <span class="va">aggregation_name</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">aggr</span> <span class="op">&lt;-</span> <span class="va">datl_no0</span><span class="op">$</span><span class="va">aggregation_name</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="va">unique</span></span></span>
<span class="r-in"><span>  <span class="va">aggr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">aggr</span><span class="op">)</span>, aggregation_name <span class="op">=</span> <span class="va">aggr</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">datl_no0</span> <span class="op">&lt;-</span> <span class="va">datl_no0</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">left_join</span><span class="op">(</span><span class="va">aggr</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">datl_no0</span><span class="op">$</span><span class="va">ci</span> <span class="op">~</span> <span class="va">datl_no0</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Niccolo Salvini, Simone DelSarto, Michela Gnaldi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

