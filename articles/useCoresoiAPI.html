<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="coresoi">
<title>Use CORE API in R â€¢ coresoi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Dosis-0.4.6/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.6/font.css" rel="stylesheet">
<link href="../deps/Lora-0.4.6/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use CORE API in R">
<meta property="og:description" content="coresoi">
<meta property="og:image" content="https://core-forge.github.io/coresoi/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script async defer src="https://hypothes.is/embed.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">coresoi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/coresoi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/summary.html">summary</a>
    <a class="dropdown-item" href="../articles/ChoiceOfElementaryIndicators.html">Choice of elementary indicators</a>
    <a class="dropdown-item" href="../articles/DataSelectionArchitecture.html">Data selection and architecture</a>
    <a class="dropdown-item" href="../articles/CompositeIndicator.html">Composite Indicator (CI)</a>
    <a class="dropdown-item" href="../articles/tryCoresoiWithYourData.html">Try `coresoi` with you own data</a>
    <a class="dropdown-item" href="../articles/useCoresoiAPI.html">Use CORE API in R</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CORE-forge/coresoi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Use CORE API in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CORE-forge/coresoi/blob/HEAD/vignettes/articles/useCoresoiAPI.Rmd" class="external-link"><code>vignettes/articles/useCoresoiAPI.Rmd</code></a></small>
      <div class="d-none name"><code>useCoresoiAPI.Rmd</code></div>
    </div>

    
    
<p>The <strong>CORE API</strong> appears to be for accessing data
related to public procurement in Italy. Specifically, it provides access
to information on suppliers ( <em>Aggiudicatari</em>), offered contracts
( <em>Cigs</em>), and public contracting stations ( <em>Stazione
Appaltante</em>). Many others endpoints (pointing to each of the
resources in our database) including indicators are going to be provided
soon.</p>
<p>To use the API, you will need to provide an <strong>API key</strong>
in the header of your requests (if you are willing to try it just reach
out to the <a href="mailto:niccolo.salvini27@gmail.com">maintainer</a>
providing monthly usage and purpose). The possible parameters for each
endpoint are listed in the Swagger API specs, and may include
information such as a limit on the number of results returned, filtering
by <em>codice_fiscale</em>, <em>denominazione</em>, <em>provincia</em>,
and other factors depending on the endpoint.</p>
<p>You can call the API using the R functions provided in the following
response, or using another programming language or toolset that can
handle RESTful APIs. Depending on your needs, you can also use the JSON
response data to create reports, analyze trends, or visualize data
related to public procurement in Italy.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://httr.r-lib.org/" class="external-link">httr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set the API endpoint for the Dev environment</span></span>
<span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://g7x6h7tfvk.execute-api.eu-west-2.amazonaws.com/dev"</span></span>
<span></span>
<span><span class="co"># Create a function to call the /aggiudicatari endpoint</span></span>
<span><span class="va">get_aggiudicatari</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">api_key</span>, <span class="va">limit</span>, <span class="va">cig</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">ruolo</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">codice_fiscale</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                               <span class="va">denominazione</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">tipo_soggetto</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">id_aggiudicazione</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                               <span class="va">sort_param</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Set the API endpoint for the /aggiudicatari endpoint</span></span>
<span>  <span class="va">endpoint</span> <span class="op">&lt;-</span> <span class="st">"/aggiudicatari"</span></span>
<span>  </span>
<span>  <span class="co"># Create the request URL with the specified parameters</span></span>
<span>  <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">endpoint</span>, <span class="st">"?limit="</span>, <span class="va">limit</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">cig</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;cig="</span>, <span class="va">cig</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">ruolo</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;ruolo="</span>, <span class="va">ruolo</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">codice_fiscale</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;codice_fiscale="</span>, <span class="va">codice_fiscale</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">denominazione</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;denominazione="</span>, <span class="va">denominazione</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">tipo_soggetto</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;tipo_soggetto="</span>, <span class="va">tipo_soggetto</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">id_aggiudicazione</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;id_aggiudicazione="</span>, <span class="va">id_aggiudicazione</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">sort_param</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;sort_param="</span>, <span class="va">sort_param</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Make the API request with the API key in the header</span></span>
<span>  <span class="va">response</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="fu"><a href="https://httr.r-lib.org/reference/add_headers.html" class="external-link">add_headers</a></span><span class="op">(</span><span class="st">"x-api-key"</span> <span class="op">=</span> <span class="va">api_key</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Return the response as a JSON object</span></span>
<span>  <span class="fu"><a href="https://httr.r-lib.org/reference/content.html" class="external-link">content</a></span><span class="op">(</span><span class="va">response</span>, as <span class="op">=</span> <span class="st">"parsed"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Create a function to call the /cigs endpoint</span></span>
<span><span class="va">get_cigs</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">api_key</span>, <span class="va">limit</span>, <span class="va">cig</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">provincia</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">tipo_scelta_contraente</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                      <span class="va">data_pubblicazione_min</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">data_pubblicazione_max</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                      <span class="va">importo_lotto_min</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">importo_lotto_max</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Set the API endpoint for the /cigs endpoint</span></span>
<span>  <span class="va">endpoint</span> <span class="op">&lt;-</span> <span class="st">"/cigs"</span></span>
<span>  </span>
<span>  <span class="co"># Create the request URL with the specified parameters</span></span>
<span>  <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">endpoint</span>, <span class="st">"?limit="</span>, <span class="va">limit</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">cig</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;cig="</span>, <span class="va">cig</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">provincia</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;provincia="</span>, <span class="va">provincia</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">tipo_scelta_contraente</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;tipo_scelta_contraente="</span>, <span class="va">tipo_scelta_contraente</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">data_pubblicazione_min</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;data_pubblicazione_min="</span>, <span class="va">data_pubblicazione_min</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">data_pubblicazione_max</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;data_pubblicazione_max="</span>, <span class="va">data_pubblicazione_max</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">importo_lotto_min</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;importo_lotto_min="</span>, <span class="va">importo_lotto_min</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">importo_lotto_max</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;importo_lotto_max="</span>, <span class="va">importo_lotto_max</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Make the API request with the API key in the header</span></span>
<span>  <span class="va">response</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="fu"><a href="https://httr.r-lib.org/reference/add_headers.html" class="external-link">add_headers</a></span><span class="op">(</span><span class="st">"x-api-key"</span> <span class="op">=</span> <span class="va">api_key</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Return the response as a JSON object</span></span>
<span>  <span class="fu"><a href="https://httr.r-lib.org/reference/content.html" class="external-link">content</a></span><span class="op">(</span><span class="va">response</span>, as <span class="op">=</span> <span class="st">"parsed"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Create a function to call the /stazione-appaltante endpoint</span></span>
<span><span class="va">get_stazione_appaltante</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">api_key</span>, <span class="va">limit</span>, <span class="va">codice_fiscale</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">partita_iva</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                     <span class="va">denominazione</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">provincia_nome</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">citta_codice</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                     <span class="va">citta_nome</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">sort_param</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Set the API endpoint for the /stazione-appaltante endpoint</span></span>
<span>  <span class="va">endpoint</span> <span class="op">&lt;-</span> <span class="st">"/stazione-appaltante"</span></span>
<span>  </span>
<span>  <span class="co"># Create the request URL with the specified parameters</span></span>
<span>  <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">endpoint</span>, <span class="st">"?limit="</span>, <span class="va">limit</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">codice_fiscale</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;codice_fiscale="</span>, <span class="va">codice_fiscale</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">partita_iva</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;partita_iva="</span>, <span class="va">partita_iva</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">denominazione</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;denominazione="</span>, <span class="va">denominazione</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">provincia_nome</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;provincia_nome="</span>, <span class="va">provincia_nome</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">citta_codice</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;citta_codice="</span>, <span class="va">citta_codice</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">citta_nome</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;citta_nome="</span>, <span class="va">citta_nome</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">sort_param</span><span class="op">)</span><span class="op">)</span> <span class="va">request_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="st">"&amp;sort_param="</span>, <span class="va">sort_param</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Make the API request with the API key in the header</span></span>
<span>  <span class="va">response</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span><span class="op">(</span><span class="va">request_url</span>, <span class="fu"><a href="https://httr.r-lib.org/reference/add_headers.html" class="external-link">add_headers</a></span><span class="op">(</span><span class="st">"x-api-key"</span> <span class="op">=</span> <span class="va">api_key</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Return the response as a JSON object</span></span>
<span>  <span class="fu"><a href="https://httr.r-lib.org/reference/content.html" class="external-link">content</a></span><span class="op">(</span><span class="va">response</span>, as <span class="op">=</span> <span class="st">"parsed"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>To use any of these functions, simply provide the required inputs
(such as the api_key and limit parameters) along with any optional
parameters (such as cig or provincia) according to the Swagger API
specifications. For example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># free usage plan (limited to Rate 100 requests per second, Burst 100 requests,Quota 10,000 requests per month starting on the 1st day)</span></span>
<span><span class="va">free_usage_api_key</span> <span class="op">=</span> <span class="st">"m4JqlGtSl8aZyAIRyPzd3mPTFCO7VC2vo9O7Xpc0"</span></span>
<span></span>
<span><span class="co"># Call the /aggiudicatari endpoint with a limit of 10 and a codice_fiscale of "6960001684"</span></span>
<span><span class="fu">get_aggiudicatari</span><span class="op">(</span>api_key <span class="op">=</span> <span class="va">free_usage_api_key</span>, limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Call the /cigs endpoint with a limit of 20 and a minimum lotto import of 1000000</span></span>
<span><span class="fu">get_cigs</span><span class="op">(</span>api_key <span class="op">=</span> <span class="va">free_usage_api_key</span>, limit <span class="op">=</span> <span class="fl">20</span>, importo_lotto_min <span class="op">=</span> <span class="fl">1000000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Call the /stazione-appaltante endpoint with a limit of 5 and a province name of "MILANO"</span></span>
<span><span class="fu">get_stazione_appaltante</span><span class="op">(</span>api_key <span class="op">=</span> <span class="va">free_usage_api_key</span>, limit <span class="op">=</span> <span class="fl">5</span>, provincia_nome <span class="op">=</span> <span class="st">"MILANO"</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Niccolo Salvini, Simone DelSarto, Michela Gnaldi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
